
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>sql has it's moments - Too Busy Coding...</title>
  <meta name="author" content="Victoria Friedman">

  
  <meta name="description" content="Today I learned, among a million other things, that I will never escape SQL statements. I think I&#8217;ve finally faced it. During week 6 at The &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://vicfriedman.github.com/blog/2013/06/25/sql-has-its-moments/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
   <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Too Busy Coding..." type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>


  

</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:vicfriedman.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Sql Has It's Moments</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-25T21:44:00-04:00" pubdate data-updated="true">Jun 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><strong>Today I learned, among a million other things, that I will never escape SQL statements.</strong> I think I&#8217;ve finally faced it. During week 6 at <a href="http://flatironschool.com">The Flatiron School</a>, when the magic of Rails and ActiveRecord was introduced, my entire class celebrated the fact SQL statements were abstracted away. We could write RUBY and still retrieve the same data, AUTOMAGICALLY. But let&#8217;s face it&#8230; SQL will always be around.</p>

<p><strong>What do you do when you have a huge app running with over 100 instances,</strong> a mega-goliath database with more migrations and data entries than I&#8217;ve ever seen, and on top of those daunting figures, project managers wanting specific data for metrics.You use a SQL GUI and you write SQL statements.</p>

<p><strong>So this is how I came across a really interesting discovery.</strong> Well two actually: SQL has <code>count</code> and <code>distinct</code> keywords available with which to write queries.</p>

<p>Here is an example of a table I was working on. This table is called photos:
  <img src="/images/post_images/photos_table2.png"></p>

<p><strong>I was told to write SQL queries to find the number of photos</strong> that have been uploaded by users in the last three weeks (so from after June 6), as well as the number of users that have updated photos.</p>

<p><strong>1. Number of photos uploaded by users on or after June 6, 2013:</strong></p>

<p><code>select count(id) from photos where user_id is not null and created_at &gt;= 6/6/2013</code></p>

<p>This command is parsing through the data in our database, finding all instances where a user_id is present (in this case all of them), as well as parsing through the created_at dates to find a match and returning to us that number of photos.
This command should return five, as there are five photos uploaded by users in the sample database.</p>

<p><strong>2. Number of users who have uploaded photos on or after June 6, 2013:</strong></p>

<p>The next query was a little bit more challengeing because I was unaware of the SQL <code>distinct</code> method.</p>

<p>Originally, I had:</p>

<p><code>select count(profile_id) from photos where profile_id is not null and created_at &gt;= 6/6/2013</code></p>

<p> But this query returns five.The problem with this query wasn&#8217;t immediately obvious to me. Count doesn&#8217;t discrimate against repeated entries. There are FIVE cells with a user_id, just not five unique id&#8217;s.</p>

<p>My first thought was the <code>uniq</code> method. Like when you have an array that contains duplicates, you can call <code>uniq</code> on that array to return that array with the duplicates removed. But unique is a reserved word in SQL, and is used to create unique indexes (an index can be created in a table to find data more easily and efficiently). So that&#8217;s when I was introduced to <code>distinct</code>.</p>

<p>With that new knowledge, I was able to correct my first attempt at the query,</p>

<p><code>select count(distinct user_id) from photos where user_id is not null and created_a &gt;= 6/6/2013</code></p>

<p>And that statement returns the correct result, which is three.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Victoria Friedman</span></span>

      








  


<time datetime="2013-06-25T21:44:00-04:00" pubdate data-updated="true">Jun 25<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://vicfriedman.github.com/blog/2013/06/25/sql-has-its-moments/" data-via="vicfriedman" data-counturl="http://vicfriedman.github.com/blog/2013/06/25/sql-has-its-moments/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/06/24/oracle-instant-client/" title="Previous Post: oracle instant client">&laquo; oracle instant client</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://vicfriedman.github.com" alt="Home"><img src="/images/Home.png"></a>
      <a href="http://vicfriedman.github.com/archives/" alt="Archives"><img src="/images/Calendar.png"></a>
      <a href="mailto:" alt="E-Mail"><img src="/images/Envelope.png"></a>
      <a href="http://vicfriedman.github.com/atom.xml" alt="subscribe feed"><img src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/06/25/sql-has-its-moments/">sql has it's moments</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/24/oracle-instant-client/">oracle instant client</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/05/pluck/">pluck</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/13/respond-to/">respond_to</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/07/method-missing/">method_missing</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/vicfriedman">@vicfriedman</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'vicfriedman',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("vicfriedman", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/vicfriedman" class="twitter-follow-button" data-show-count="false">Follow @vicfriedman</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Victoria Friedman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
